# ๐ฆ Siyadah Ops AI - ูุธุงู ุฅุฏุงุฑุฉ ุงูุนูููุงุช ุงูุฐูู

ูุธุงู ุฅุฏุงุฑุฉ ุงูุนูููุงุช ุงูุฐูู ูุดุฑูุฉ ุฏ10 ููุชุณููู ุงูุฑูููุ ูุน ูุฑููุฉ ูุงููุฉ ูู ุชุนุฏูู ุณููู ุงูู AI ุจุฏูู ุงูุญุงุฌุฉ ููููุฏ.

## ๐ ุงููููุฒุงุช ุงูุฑุฆูุณูุฉ

- **๐ค AI Prompts ูุฑูุฉ**: ุชุนุฏูู ุณููู ุงูู AI ูู ูุงุฌูุฉ ุจุณูุทุฉ
- **๐จโ๐ผ CoachAI**: ูุฏุฑุจ ุฐูู ูุชุญููุฒ ุงูููุธููู ุญุณุจ ุงูุฃุฏุงุก
- **๐ ุฅุฏุงุฑุฉ KPIs**: ุชุชุจุน ุงูุฃุฏุงุก ูุญุณุงุจ ุงูู drift ุชููุงุฆูุงู
- **๐ ุฅุฏุงุฑุฉ ุงูููุงู**: ุฅูุดุงุก ููุชุงุจุนุฉ ุงูููุงู ูู ูุตุงุฏุฑ ูุชุนุฏุฏุฉ
- **๐ง Digests ุฐููุฉ**: ุชูุงุฑูุฑ ููููุฉ ูุฃุณุจูุนูุฉ ูููุฏุฑุงุก
- **๐ ุชูุงูู Slack**: ุงุณุชูุจุงู ุงูุฃูุงูุฑ ูุชุญููููุง ูููุงู/ูุดุงุฑูุน

## ๐๏ธ ุงูุชุซุจูุช ูุงูุชุดุบูู

### ุงูุทุฑููุฉ ุงูุณุฑูุนุฉ
```bash
./start.sh
```

### ุงูุทุฑููุฉ ุงููุฏููุฉ
```bash
# 1. ุชุซุจูุช ุงููุชุทูุจุงุช
pip install -r requirements.txt

# 2. ุฅุนุฏุงุฏ ุงูุจูุฆุฉ
cp env.example .env
# ุงููุฃ ููู .env ุจุงููุนูููุงุช ุงููุทููุจุฉ

# 3. ุชุดุบูู ุงููุธุงู
uvicorn main:app --reload

# 4. ูุญุต ุงููุธุงู
curl http://127.0.0.1:8000/healthz
```

### ูุญุต ุดุงูู ูููุธุงู
```bash
./run_tests.sh
```

## ๐ก API Endpoints ุงูุฃุณุงุณูุฉ

### ุงูููุงู
- `POST /tasks` - ุฅูุดุงุก ูููุฉ ุฌุฏูุฏุฉ
- `GET /tasks?assignee_email=...` - ุฌูุจ ุงูููุงู

### KPIs
- `POST /kpis/upsert` - ุชุญุฏูุซ ุฃู ุฅูุดุงุก KPI

### ุงูููุชุด ุงูุฐูู
- `POST /coach/ping` - ุงูุญุตูู ุนูู ุฑุณุงูุฉ ุชุญููุฒ

### KPIs
- `POST /kpis/upsert` - ุชุญุฏูุซ ุฃู ุฅูุดุงุก KPI
- `GET /kpis/performance/{user_email}` - ุฌูุจ ุฃุฏุงุก ุงููุณุชุฎุฏู

### ุงูุชูุงุฑูุฑ ูุงูุฅูููู
- `POST /digests/manager` - ุฅุฑุณุงู ุชูุฑูุฑ ูููู ูููุฏูุฑ
- `POST /digests/executive` - ุฅุฑุณุงู ุชูุฑูุฑ ุฃุณุจูุนู ุชูููุฐู

### ุชูุงูู Slack
- `POST /slack/events` - webhook ูุฃุญุฏุงุซ Slack
- `POST /slack/mock` - ุงุฎุชุจุงุฑ ุฑุณุงุฆู Slack ุจุฏูู token

### ุฅุฏุงุฑุฉ ุงูู Prompts (ุงูุฃูู!)
- `GET /prompts/{agent_type}` - ุนุฑุถ ุฌููุน prompts
- `PUT /prompts/{agent_type}/{prompt_name}` - ุชุญุฏูุซ prompt
- `GET /prompts/{agent_type}/edit` - ูุงุฌูุฉ ุชุนุฏูู ุจุณูุทุฉ
- `GET /prompts/templates` - ุงูููุงูุจ ุงูุฌุงูุฒุฉ

## ๐ฏ ูุซุงู ุนูู ุชุนุฏูู ุงูู Prompts

### ุชุบููุฑ ุฃุณููุจ ุงูููุชุด:
```bash
curl -X PUT http://127.0.0.1:8000/prompts/coach/system \
  -H "Content-Type: application/json" \
  -d '{"template": "๐ ููุง {name}! ุฃุฏุงุคู ููุชุงุฒ ูู {department}! ุงุณุชูุฑ ุนูู ูุฐุง ุงููุณุชูู ุงูุฑุงุฆุน! ๐ช"}'
```

### ุงุฎุชุจุงุฑ ุงูู Prompt ุงูุฌุฏูุฏ:
```bash
curl -X POST http://127.0.0.1:8000/coach/ping \
  -H "Content-Type: application/json" \
  -d '{"user_email":"test@d10.sa","department":"sales","summary":"ุฃุฏุงุก ููุชุงุฒ"}'
```

## ๐งช ุงุฎุชุจุงุฑุงุช ุณุฑูุนุฉ

### ุงุฎุชุจุงุฑ KPIs ูุงูููุชุด:
```bash
# ุฅุถุงูุฉ KPI ูููุณุชุฎุฏู
curl -X POST http://127.0.0.1:8000/kpis/upsert \
  -H "Content-Type: application/json" \
  -d '{"user_email":"amina.br@d10.sa","month":"2025-09","target":10,"actual":6}'

# ุงูุญุตูู ุนูู ุฑุณุงูุฉ ุชุญููุฒ
curl -X POST http://127.0.0.1:8000/coach/ping \
  -H "Content-Type: application/json" \
  -d '{"user_email":"amina.br@d10.sa","department":"sales","summary":"ุฃูุฌุฒุช 6/10"}'
```

### ุงุฎุชุจุงุฑ Slack Mock:
```bash
# ุฅูุดุงุก ูููุฉ ูู Slack
curl -X POST http://127.0.0.1:8000/slack/mock \
  -H "Content-Type: application/json" \
  -d '{"text":"ูููุฉ: ุฅุตูุงุญ ุฎุทุฃ ูู ุงููุธุงู","user":"test_user"}'

# ุชูููู ูุฏู ุฅูู ูุดุฑูุน
curl -X POST http://127.0.0.1:8000/slack/mock \
  -H "Content-Type: application/json" \
  -d '{"text":"ูุฏู: ุฅุทูุงู ูููุน ุฌุฏูุฏ ููุดุฑูุฉ","user":"test_user"}'
```

### ุงุฎุชุจุงุฑ ุงูุชูุงุฑูุฑ:
```bash
# ุชูุฑูุฑ ูุฏูุฑ
curl -X POST http://127.0.0.1:8000/digests/manager \
  -H "Content-Type: application/json" \
  -d '{"manager_email":"manager@d10.sa"}'

# ุชูุฑูุฑ ุชูููุฐู
curl -X POST http://127.0.0.1:8000/digests/executive \
  -H "Content-Type: application/json" \
  -d '{}'
```

## ๐๏ธ ูููู ุงููุดุฑูุน

```
siyadah_ops_ai/
โโโ app/
โ   โโโ ai/
โ   โ   โโโ prompts/          # ุงูู prompts ุงููุฑูุฉ
โ   โ   โ   โโโ coach_prompts.py
โ   โ   โ   โโโ orchestrator_prompts.py
โ   โ   โโโ base_agent.py
โ   โ   โโโ coach.py
โ   โโโ routers/
โ   โ   โโโ health.py
โ   โ   โโโ tasks.py
โ   โ   โโโ prompts.py        # ุฅุฏุงุฑุฉ ุงูู prompts
โ   โโโ config.py
โ   โโโ db.py
โ   โโโ models.py
โ   โโโ schemas.py
โโโ main.py
โโโ requirements.txt
โโโ README.md
```

## ๐ง ุงูุชุฎุตูุต ุงูุณุฑูุน

### ุชุนุฏูู ุฑุณุงุฆู ุงูููุชุด:
1. ุงุฐูุจ ุฅูู `/prompts/coach/edit`
2. ุนุฏู ุงููุงูุจ ุญุณุจ ุงูุญุงุฌุฉ
3. ุงุญูุธ ุงูุชุบููุฑุงุช
4. ุงูุชุบููุฑ ูุทุจู ููุฑุงู!

### ุงููุชุบูุฑุงุช ุงููุชุงุญุฉ:
- `{name}` - ุงุณู ุงูููุธู
- `{department}` - ุงููุณู
- `{performance_level}` - ูุณุชูู ุงูุฃุฏุงุก
- `{focus_area}` - ุงููุฌุงู ุงููุทููุจ ุงูุชุฑููุฒ ุนููู

## ๐ Business Rules

- **Quiet Mode**: ูุง ุฅุฒุนุงุฌ ุฎุงุฑุฌ ุณุงุนุงุช ุงูุนูู (9-18 KSA)
- **ููุงูุฉ ุงูุฃุณุจูุน**: ูุง ุฑุณุงุฆู ูู ุงูุฎููุณ ูุงูุฌูุนุฉ
- **ุญุฏ ุงูุฑุณุงุฆู**: ุฑุณุงูุฉ ูุงุญุฏุฉ ููููุงู ููู ููุธู
- **ุชุตุนูุฏ**: ูููุฏูุฑ ุจุนุฏ 3 ุฃูุงู ูู ุงูุฃุฏุงุก ุงูุถุนูู

## ๐จ ููุงุญุธุงุช ูููุฉ

- ุชุฃูุฏ ูู ููุก ุฌููุน ุงููุชุบูุฑุงุช ูู ููู `.env`
- ุงูู prompts ูุญููุธุฉ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ูุน ูุณุฎ ุงุญุชูุงุทูุฉ
- ุงููุธุงู ูุฏุนู fallback responses ุนูุฏ ูุดู OpenAI
- ุฌููุน ุงูุนูููุงุช ูุณุฌูุฉ ุจู structlog

## ๐ ุงูุฏุนู

ูููุณุงุนุฏุฉ ุฃู ุงูุงุณุชูุณุงุฑุงุชุ ุชูุงุตู ูุน ูุฑูู ุงูุชุทููุฑ.
